{% extends 'base.html' %}
{% block content %}
{% load crispy_forms_tags %}
<div class="blog-post card post-card container py-5">
    <div class="row justify-content-center">
        <div class="col-3">
            <img src="{{ object.author.profile.image.url }}" alt="image" width="80px" class="profile-picture">
        </div>
        <div class="col-9">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-10">
                        <a href="{% url 'user-posts' object.author.username %}"
                            class="card-link text-dark font-weight-bolder">
                            {{object.author}}
                        </a>
                        <p class="blog-post-meta text-muted">
                            {{object.date_posted|date:"D jS M, Y \a\t H:i"}}
                        </p>
                    </div>
                    <div class="col-1 mr-1">
                        <button role="checkbox" id="save-btn" class="article-save-btn btn" data-category="save"
                            alt="save" title="save">
                            <i class="far fa-bookmark"></i>
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <h2 class="blog-post-title">
                            <span class="post-type text-white bg-dark">
                                {{object.type}}
                            </span>
                            {{object.title}}
                        </h2>
                        <p class="post-description text-dark">
                            {{object.description}}
                        </p>
                    </div>
                </div>

                {% if object.author == user %}
                <div class="row">
                    <div class="col">
                        <a href="{% url 'post-update' object.id %}" class="btn btn-sm btn-outline-info">Update</a>
                        <a href="{% url 'post-delete' object.id %}" class="btn btn-sm btn-outline-danger">Delete</a>
                    </div>
                </div>
                {% endif %}

                <div class="row">
                    <div class="col">
                        <a href="#" class="btn react-btn">
                            <svg class="crayons-icon" width="24" height="24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M18.884 12.595l.01.011L12 19.5l-6.894-6.894.01-.01A4.875 4.875 0 0112 5.73a4.875 4.875 0 016.884 6.865zM6.431 7.037a3.375 3.375 0 000 4.773L12 17.38l5.569-5.569a3.375 3.375 0 10-4.773-4.773L9.613 10.22l-1.06-1.062 2.371-2.372a3.375 3.375 0 00-4.492.25v.001z">
                                </path>
                            </svg>
                            <span class="pl-2" id="num-of-react">
                                {{ reacts.r_count }}
                            </span>
                            reactions
                        </a>
                    </div>
                    <div class="col">
                        <a href="#" class="btn react-btn">
                            <svg class="crayons-icon" width="24" height="24" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M10.5 5h3a6 6 0 110 12v2.625c-3.75-1.5-9-3.75-9-8.625a6 6 0 016-6zM12 15.5h1.5a4.501 4.501 0 001.722-8.657A4.5 4.5 0 0013.5 6.5h-3A4.5 4.5 0 006 11c0 2.707 1.846 4.475 6 6.36V15.5z">
                                </path>
                            </svg>
                            <span class="pl-2" id="num-of-comments">
                                {{ comments.c_count }}
                            </span> comment
                        </a>
                    </div>
                </div>

                <div class="row border-top my-5 py-5">
                    <div class="col">
                        <form method="POST" novalidate class="px-2 py-2">
                            {% csrf_token %}
                            {{form|crispy}}

                            <div class="container px-0 mx-0">
                                <div class="row">
                                    <div class="col">
                                        <button class="btn btn-lg btn-outline-primary" type="submit">Submit</button>
                                    </div>
                                </div>
                            </div>
                    </div>
                    </form>
                </div>
            </div>

            {% for comment in comments.com %}
            <div class="row card my-3">
                <div class="col">
                    <div class="container-fluid">
                        <div class="row justify-content-between pt-4">
                            <div class="col-4">
                                <img src="{{ comment.comment_author.profile.image.url }}" width="40px"
                                    class="img-thumbnail border-dark rounded-circle account-img">
                                <h3 class="text-dark d-inline py-4">
                                    {{comment.comment_author.username}}
                                </h3>
                            </div>
                            <div class="col-3">
                                <p class="text-muted">
                                    {{comment.date_commented|date:"D jS M, Y \a\t H:i"}}
                                </p>
                            </div>
                        </div>
                        <div class="row py-5">
                            <div class="col text-center">
                                {{comment.comment_content}}
                                {% if comment.comment_image %}
                                <div class="comment-img">
                                    <img src="{{ comment.comment_image.url }}"
                                        class="img-thumbnail rounded comment-img">
                                </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

</div><!-- /.blog-post -->
{% endblock content %}